<!doctype html>
<html>
<head>
    <title>Horse race</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/modernizr.js" type="text/javascript"></script>
    <script>
        var run1 = 0;
        var run2 = 0;
        var run3 = 0;
        var run4 = 0;
        var run5 = 0;
        var run6 = 0;
        var finish1 = 0;
        var finish2 = 0;
        var finish3 = 0;
        var finish4 = 0;
        var finish5 = 0;
        var finish6 = 0;
        checkRace = function () {
            let goal = 500;

            if (run1 > 1300 && finish1 < 1) {
                finish1 = 1;
                setTimeout(() => console.log($("#name1").val()), goal);
                $("#ranking").append("<li>"+$("#name1").val()+"</li>")
            }
            if (run2 > 1300 && finish2 < 1) {
                finish2 = 1;
                setTimeout(() => console.log($("#name2").val()), goal);
                $("#ranking").append("<li>"+$("#name2").val()+"</li>")
            }
            if (run3 > 1300 && finish3 < 1) {
                finish3 = 1;
                setTimeout(() => console.log($("#name3").val()), goal);
                $("#ranking").append("<li>"+$("#name3").val()+"</li>")
            }
            if (run4 > 1300 && finish4 < 1) {
                finish4 = 1;
                setTimeout(() => console.log($("#name4").val()), goal);
                $("#ranking").append("<li>"+$("#name4").val()+"</li>")
            }
            if (run5 > 1300 && finish5 < 1) {
                finish5 = 1;
                setTimeout(() => console.log($("#name5").val()), goal);
                $("#ranking").append("<li>"+$("#name5").val()+"</li>")
            }
            if (run6 > 1300 && finish6 < 1) {
                finish6 = 1;
                setTimeout(() => console.log($("#name6").val()), goal);
                $("#ranking").append("<li>"+$("#name6").val()+"</li>")
            }
        }
        startRace = function () {
            let multi = 10;
            let delay = 40;
            playAlert = setInterval(function () {
                const meter1 = Math.random() * multi;
                run1 = run1 + meter1;
                jQuery("#player1").css({"position": "relative", "top": "0px", "left": run1 + "px"});
                checkRace();
            }, delay);
            playAlert = setInterval(function () {
                const meter2 = Math.random() * multi;
                run2 = run2 + meter2;
                jQuery("#player2").css({"position": "relative", "top": "0px", "left": run2 + "px"});
                checkRace();
            }, delay);
            playAlert = setInterval(function () {
                const meter3 = Math.random() * multi;
                run3 = run3 + meter3;
                jQuery("#player3").css({"position": "relative", "top": "0px", "left": run3 + "px"});
                checkRace();
            }, delay);

            playAlert = setInterval(function () {
                const meter4 = Math.random() * multi;
                run4 = run4 + meter4;
                jQuery("#player4").css({"position": "relative", "top": "0px", "left": run4 + "px"});
                checkRace();
            }, delay);

            playAlert = setInterval(function () {
                const meter5 = Math.random() * multi;
                run5 = run5 + meter5;
                jQuery("#player5").css({"position": "relative", "top": "0px", "left": run5 + "px"});
                checkRace();
            }, delay);

            playAlert = setInterval(function () {
                const meter6 = Math.random() * multi;
                run6 = run6 + meter6;
                jQuery("#player6").css({"position": "relative", "top": "0px", "left": run6 + "px"});
                checkRace();
            }, delay);

            $("#btn_start").hide();
        };
        // clearInterval(playAlert);
    </script>
</head>
<body>

<div id="player_rail">
    <div id="player1">
        <img src="image/player.gif" width="100" />
        <span id="player1_name">1</span>
    </div>
    <div id="player2">
        <img src="image/player.gif" width="100" />
        <span id="player2_name">2</span>
    </div>
    <div id="player3">
        <img src="image/player.gif" width="100" />
        <span id="player3_name">3</span>
    </div>
    <div id="player4">
        <img src="image/player.gif" width="100" />
        <span id="player4_name">4</span>
    </div>
    <div id="player5">
        <img src="image/player.gif" width="100" />
        <span id="player5_name">5</span>
    </div>
    <div id="player6">
        <img src="image/player.gif" width="100" />
        <span id="player6_name">6</span>
    </div>
</div>
<div id="winner_show">
    <ol id="ranking"></ol>
</div>
<div id="wrap">
    <div id="test">
        <br/><br/><br/><br/>
        <br/>
        <br/>
        F<br/>
        I<br/>
        N<br/>
        I<br/>
        S<br/>
        H<br/>
    </div>
</div>
<div id = "names">
    <table>
        <tr>
            <td>1번 마: <input type="text" id = "name1" value="일두현"/></td>
            <td>배팅금액: <input type="text" id = "money1"/></td>
        </tr>
        <tr>
            <td>2번 마: <input type="text" id = "name2" value="이두현"/></td>
            <td>배팅금액: <input type="text" id = "money2"/></td>
        </tr>
        <tr>
            <td>3번 마: <input type="text" id = "name3" value="삼두현"/></td>
            <td>배팅금액: <input type="text" id = "money3"/></td>
        </tr>
        <tr>
            <td>4번 마: <input type="text" id = "name4" value="사두현"/></td>
            <td>배팅금액: <input type="text" id = "money4"/></td>
        </tr>
        <tr>
            <td>5번 마: <input type="text" id = "name5" value="오두현"/></td>
            <td>배팅금액: <input type="text" id = "money5"/></td>
        </tr>
        <tr>
            <td>6번 마: <input type="text" id = "name6" value="육두현"/></td>
            <td>배팅금액: <input type="text" id = "money6"/></td>
        </tr>
    </table>
</div>
<button id="btn_start" onclick="startRace()" class="styled">start race</button>
</body>
</html>